<html>
<head>
    <style>
        body {
            background-color: black;
            text-align: center;
        }
        #pongCanvas {
            background-color: black;
            border: solid #00FF00;
            top: 6.25%;
        }
        h1 {
            color: #00FF00;
            font-family: sans-serif;
        }
        p {
            color: white;
        }
    </style>
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
    <script src="Ball.js"></script>
    <script src="Paddle.js"></script>
    </head>
    <body>
        <h1>PONG Revised!!</h1>
    <canvas id="pongCanvas" width="800" height="500">
    Your browser does not support the HTML5 canvas.
    </canvas>
    <script>
        window.onload = function(){
            var canvas = document.getElementById("pongCanvas");
        
            if (canvas && canvas.getContext) {
                var ctx = canvas.getContext("2d");
            }
            var paddle = new Paddle();
            var ball = new Ball();
            ball.position = {x:canvas.width / 2, y: canvas.height / 2};
            
            
            //controlls paddle position
            canvas.addEventListener('mousemove', function(evt) {
                var rect = canvas.getBoundingClientRect();
                paddle.position.y = Math.round((evt.clientY-rect.top)/(rect.bottom-rect.top)*canvas.height);
                //makes sure paddle doesn't go off screen
                if (paddle.position.y < paddle.dimensions.length / 10) {
                    paddle.position.y = paddle.dimensions.length / 10;
                } else if (paddle.position.y > canvas.height - paddle.dimensions.length - paddle.dimensions.length / 10) {
                    paddle.position.y = canvas.height - paddle.dimensions.length - paddle.dimensions.length / 10;
                }
            });
            
            
            function game() {
                ctx.fillStyle = "#000";
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                paddle.draw(ctx);
               // if(paddle.hitTest(ball) || paddle2.hitTest(ball)){
                if (paddle.hitTest(ball)) {
                   ball.bounce("x");
                }
                ball.draw(ctx);
                //ball.move();
                if (ball.position.x >= canvas.width || ball.position.x <= 0) {
                    ball.bounce("x");
                } else if (ball.position.y >= canvas.height || ball.position.y <= 0) {
                    ball.bounce("y");
                }
                requestAnimationFrame(game);
            }
            game();
        }
        
        
    </script>  
    </body>
</html>